#!/usr/bin/env bash

VERSION='0.0.1'
SHEETS="$HOME/.ch-sheets"
REPO='git://github.com/visionmedia/ch-sheets.git'

if [ -d $SHEETS ]; then
  case $1 in
    -v|--version)
      echo "ch $VERSION"
      ;;
    help|-h|--help)
      echo 'usage: ch ch'
      echo '       ch ch [search|find|list] [sheet]'
      echo '       ch edit [sheet]'
      echo '       ch locate [sheet]'
      echo '       ch update'
      echo '       ch [-v|--version] '
      ;;
    update)
      cd $SHEETS
      git pull origin master 2> /dev/null
      ;;
    locate)
      if [ $2 ]; then
        find $SHEETS -name *$2*.sheet -type f
      else
        find $SHEETS -name *.sheet -type f
      fi
      ;;
    search|find|list)
      ch locate $2 | xargs basename -s '.sheet'
      ;;
    edit)
      ch locate $2 | xargs $EDITOR
      ;;
    *)
      echo
      ch locate $1 | head -n 1 | xargs cat | less
      ;;
  esac
else
  git clone $REPO $SHEETS &&
  echo Initialized cheat sheets at $SHEETS
fi


